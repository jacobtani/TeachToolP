<%= form_for @user, url: locals[:path], html: {mulitpart: true, class: 'well', role: 'form'} do |f| %>  
  <div id="form-errors"></div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-6">
        <%= f.text_field :first_name, placeholder: 'Enter first name', class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.text_field :surname, placeholder: 'Enter surname', class: 'form-control' %>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class = 'row'>
      <div class="col-md-6">
        <%= f.number_field :phone_number, placeholder: 'Enter phone number' %>
      </div>
      <div class="col-md-6">
        <%= f.text_field :postal_address, placeholder: 'Enter postal address', class: 'form-control' %>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-md-4">
        <%= f.text_field :city, placeholder: 'Enter city', class: 'form-control' %>
      </div>
      <div class="col-md-4">
        <%= f.select :state, [ 'AK', 'AL', 'AR', 'AZ', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'IA', 'ID', 'IL', 'IN', 'KS', 'KY', 'LA', 'MA', 'MD', 'ME', 'MI', 'MN', 'MO', 'MS', 'MT', 'NC', 'NE', 'NH', 'NJ', 'NM', 'NV', 'NY','OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX',  'UT', 'VA', 'VT', 'WA', 'WI', 'WV', 'WY'] %>            
      </div>
      <div class="col-md-4">
        <%= f.number_field :zip_code, placeholder: 'Enter zipcode', class: 'form-control' %>
      </div>
    </div>
  </div>
 
  <div class="form-group">
    <div class = 'row'>
      <div class="col-sm-6">
        <%= f.email_field :email, placeholder: 'Enter email', class: 'form-control' %>
      </div>
      <div class="col-sm-6">
        <%= f.password_field :password, placeholder: 'Enter password', class: 'form-control' %>
      </div>
    </div>
  </div>
 
  <%if current_user && current_user.role == 'parent'%>
    <%= f.hidden_field :role, value: 'student' %>
    <div class="form-group">
      <div class="row">
        <div class="col-md-4">
          <%= f.date_field :date_of_birth, label: 'DOB' %>
        </div>
        <div class="col-md-4">
          <%= f.number_field :school_grade, placeholder: 'Enter school grade', class: 'form-control' %>
        </div>
        <div class="col-md-4">
          <%= f.text_field :additional_info, placeholder: 'Enter additional information about student', class: 'form-control' %>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col-md-4">
          <%= f.text_field :contact_email, placeholder: 'Enter contact email', class: 'form-control', label: 'Parent Email' %>
        </div>
        <div class="col-md-4">
          <%= f.text_field :referrer_email %>
        </div>
      </div>
    </div>
  <%end%>

  <%if current_user && current_user.role =='admin'%>
    <%= f.hidden_field :role, value: 'admin' %>
    <div class="form-group">
      <div class = "row">
        <div class = "col-md-6">
          <%= f.select :status, User.statuses.keys.to_a, label: 'Account Status' %>
        </div>
        <div class="col-md-6">
          <%= f.select :role, ['employee', 'admin'] %>
        </div>
      </div>
    </div>
  <%end%>
   
  <% if current_user && current_user.role == 'parent'%>
    <div class = "row">
      <div id="enrolments">
        <%= f.fields_for :enrolments do |enrolment| %>
          <%= render 'enrolment_fields', :f => enrolment  %>
        <% end %>
        <div class="links form-group">
          <%= link_to_add_association fa_icon(:plus, text: 'Add More Enrolments'), f, :enrolments, class: 'btn btn-info col-md-4'  %>
        </div>    
      </div>
    </div>
  <%end%>

  <%= f.hidden_field :activation_date, value: Date.today %>

  
  <%= javascript_tag "resetCocoonDestroyed();" if @user.errors[:enrolments].present? %>
  <div class="form-group row submit">
    <%= f.button "Save", class: "btn btn-success", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Saving..."} %>
    <a class="btn btn-danger hvr-trim" id='add-user-cancel-button' data-behaviour="form-dismiss">Cancel</a>
  </div>
<% end %>