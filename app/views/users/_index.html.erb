<div class = 'container level-header'>
  <table class = 'table table-striped'>
    <thead>
      <th> Id </th>
      <th> Name </th>
      <th> Role </th>
      <th> Status </th>     
      <th> Rewards </th>     
      <th> Payment Due </th>     
      <th> Administration </th>
    </thead>
    <% @users.each do |user| %>
      <tr>
        <td> <%= user.id %> </td>
        <td><%= link_to user.full_name, users_admin_path(user) %>
        <td> <%= user.role %> </td>
        <td> <%= user.status %> </td>
        <td> <%= number_to_currency user.rewards %> </td>
        <td> <%= user.payment_due.strftime('%c') %> </td>
        <% if user.payment_due < Date.today && current_user.role == 'admin' || current_user.role == 'employee' %>
          <td><%= link_to 'Payment Missing', missing_payment_path(id: user.id), class: "btn btn-success", id: 'missing-payment-link' %></td>
        <%end%>
        <td><%= link_to 'Payment Received', payment_received_path(id: user.id), class: "btn btn-success", id: 'payment-received-link' %></td>
        <% if current_user.role == 'admin'%>
          <td><%= link_to 'Sign in as', login_as_user_path(id: user.id), class: 'btn btn-info' %></td>
          <% if user.needs_suspension? && user.status != 'SUSPENDED'%>
            <td><%= link_to 'Suspend Account', suspend_child_path(id: user.id), class: "btn btn-success", id: 'suspend-user-link' if user.needs_suspension? %></td>
          <%end%>  
        <%elsif current_user.role == 'parent'%>
          <td><%= link_to 'Edit', edit_users_admin_path(id: user.id), class: "btn btn-info", id: 'edit-user-registration-link' %></td> 
          <td><%= link_to 'Terminate Account', cancel_child_path(id: user.id), class: "btn btn-danger", id: 'cancel-user-link' %></td>
        <%end%>
      </tr>
    <%end%>
  </table>
</div>
